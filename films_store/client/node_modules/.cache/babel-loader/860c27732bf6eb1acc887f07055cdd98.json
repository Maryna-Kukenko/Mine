{"ast":null,"code":"import _classCallCheck from \"D:\\\\GitHubRepo\\\\Mine\\\\films_store\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\GitHubRepo\\\\Mine\\\\films_store\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\GitHubRepo\\\\Mine\\\\films_store\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\GitHubRepo\\\\Mine\\\\films_store\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\GitHubRepo\\\\Mine\\\\films_store\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\GitHubRepo\\\\Mine\\\\films_store\\\\client\\\\src\\\\components\\\\UploadFile\\\\index.js\";\nimport React from 'react';\nimport './style.scss'; // export default (props) => {\n//   return (\n//     <form\n//       onSubmit={props.addFile}\n//       className='upload-form'\n//     >\n//       <input\n//         type='file'\n//         accept='.text, .json'/>\n//       <input\n//         type='submit'\n//         value='ADD file'\n//       />\n//     </form>\n//   )\n// }\n\nvar UploadFile =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UploadFile, _React$Component);\n\n  function UploadFile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UploadFile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UploadFile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.onChange = function (e) {\n      var files = e.target.files;\n      console.log(files[0]);\n      var reader = new FileReader();\n      reader.readAsText(files[0]);\n\n      reader.onload = function (e) {\n        console.log(e.target.result);\n        var data = JSON.parse(e.target.result);\n        console.log(data.title);\n        console.log(data.release_year);\n        console.log(data.stars);\n        console.log(data.format);\n        var title = data.title;\n        var release_year = data.release_year;\n        var stars = data.stars;\n        var format = data.format;\n        var formData = {\n          title: title,\n          release_year: release_year,\n          stars: stars,\n          format: format\n        };\n        console.log(formData);\n        return fetch('/api/items', {\n          method: 'POST',\n          // type : 'application/json',\n          body: formData\n        }).then(function (res) {\n          return console.log(res);\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(UploadFile, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"form\", {\n        className: \"upload-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        accept: \".txt, .json\",\n        onChange: function onChange(e) {\n          return _this2.onChange(e);\n        },\n        multiple: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UploadFile;\n}(React.Component);\n\nexport default UploadFile;","map":{"version":3,"sources":["D:\\GitHubRepo\\Mine\\films_store\\client\\src\\components\\UploadFile\\index.js"],"names":["React","UploadFile","onChange","e","files","target","console","log","reader","FileReader","readAsText","onload","result","data","JSON","parse","title","release_year","stars","format","formData","fetch","method","body","then","res","catch","err","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEMC,U;;;;;;;;;;;;;;;;;;UAEJC,Q,GAAW,UAACC,CAAD,EAAO;AAChB,UAAIC,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASD,KAArB;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYH,KAAK,CAAC,CAAD,CAAjB;AAEA,UAAII,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,MAAAA,MAAM,CAACE,UAAP,CAAkBN,KAAK,CAAC,CAAD,CAAvB;;AAEAI,MAAAA,MAAM,CAACG,MAAP,GAAgB,UAACR,CAAD,EAAM;AACpBG,QAAAA,OAAO,CAACC,GAAR,CAAYJ,CAAC,CAACE,MAAF,CAASO,MAArB;AAEA,YAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWZ,CAAC,CAACE,MAAF,CAASO,MAApB,CAAb;AACAN,QAAAA,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACG,KAAjB;AACAV,QAAAA,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACI,YAAjB;AACAX,QAAAA,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACK,KAAjB;AACAZ,QAAAA,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACM,MAAjB;AAEA,YAAMH,KAAK,GAAGH,IAAI,CAACG,KAAnB;AACA,YAAMC,YAAY,GAAGJ,IAAI,CAACI,YAA1B;AACA,YAAMC,KAAK,GAAGL,IAAI,CAACK,KAAnB;AACA,YAAMC,MAAM,GAAGN,IAAI,CAACM,MAApB;AAEA,YAAMC,QAAQ,GAAG;AACfJ,UAAAA,KAAK,EAAEA,KADQ;AAEfC,UAAAA,YAAY,EAAEA,YAFC;AAGfC,UAAAA,KAAK,EAAEA,KAHQ;AAIfC,UAAAA,MAAM,EAAEA;AAJO,SAAjB;AAMAb,QAAAA,OAAO,CAACC,GAAR,CAAYa,QAAZ;AAGA,eAAOC,KAAK,CAAC,YAAD,EAAe;AACzBC,UAAAA,MAAM,EAAE,MADiB;AAEzB;AACAC,UAAAA,IAAI,EAAEH;AAHmB,SAAf,CAAL,CAKJI,IALI,CAKC,UAAAC,GAAG;AAAA,iBAAInB,OAAO,CAACC,GAAR,CAAYkB,GAAZ,CAAJ;AAAA,SALJ,EAMJC,KANI,CAME,UAAAC,GAAG;AAAA,iBAAErB,OAAO,CAACC,GAAR,CAAYoB,GAAZ,CAAF;AAAA,SANL,CAAP;AAOL,OA9BG;AA+BH,K;;;;;;;6BACU;AAAA;;AACP,aACE;AACA,QAAA,SAAS,EAAC,aADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGA;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,MAAM,EAAC,aAFT;AAGE,QAAA,QAAQ,EAAE,kBAACxB,CAAD;AAAA,iBAAO,MAAI,CAACD,QAAL,CAAcC,CAAd,CAAP;AAAA,SAHZ;AAIE,QAAA,QAAQ,MAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHA,CADF;AAgBD;;;;EA1DsBH,KAAK,CAAC4B,S;;AA6D/B,eAAe3B,UAAf","sourcesContent":["import React from 'react'\r\nimport './style.scss'\r\n\r\n// export default (props) => {\r\n//   return (\r\n//     <form\r\n//       onSubmit={props.addFile}\r\n//       className='upload-form'\r\n//     >\r\n//       <input\r\n//         type='file'\r\n//         accept='.text, .json'/>\r\n//       <input\r\n//         type='submit'\r\n//         value='ADD file'\r\n//       />\r\n//     </form>\r\n//   )\r\n// }\r\n\r\nclass UploadFile extends React.Component{\r\n\r\n  onChange = (e) => {\r\n    let files = e.target.files;\r\n    console.log(files[0]);\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsText(files[0]);\r\n\r\n    reader.onload = (e) =>{\r\n      console.log(e.target.result);\r\n\r\n      const data = JSON.parse(e.target.result);\r\n      console.log(data.title);\r\n      console.log(data.release_year);\r\n      console.log(data.stars);\r\n      console.log(data.format);\r\n\r\n      const title = data.title;\r\n      const release_year = data.release_year;\r\n      const stars = data.stars;\r\n      const format = data.format;\r\n\r\n      const formData = {\r\n        title: title,\r\n        release_year: release_year,\r\n        stars: stars,\r\n        format: format\r\n      }\r\n      console.log(formData);\r\n\r\n\r\n      return fetch('/api/items', {\r\n        method: 'POST',\r\n        // type : 'application/json',\r\n        body: formData\r\n      })\r\n        .then(res => console.log(res))\r\n        .catch(err=>console.log(err))\r\n}\r\n}\r\n  render() {\r\n    return (\r\n      <form\r\n      className='upload-form'\r\n      >\r\n      <input\r\n        type='file'\r\n        accept='.txt, .json'\r\n        onChange={(e) => this.onChange(e)}\r\n        multiple\r\n      />\r\n      {/*<input*/}\r\n      {/*  type='submit'*/}\r\n      {/*  value='ADD file'*/}\r\n      {/*/>*/}\r\n    </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UploadFile"]},"metadata":{},"sourceType":"module"}